<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Schedule</title>
    <style>
        h1 {text-align: center; color: #78aeed}
        table {width: 100%; border: lightgrey}
        body {background: #242424; font-family: Calibri}
        th {color: aquamarine; background: #363636; padding: 4px;}
        td {color: white; background: #363636; padding: 6px;}
        button {display: inline-block; border: 0; background: #363636; color: white;}
        button:hover{ background: #3e3e3e }
    </style>
</head>
<body>
<h2>
    <button style="float: left; height: 40px; width: 80px; border-radius: 10px" onclick="location.href ='./' ">Menu</button>
</h2>
    <h1>Schedule</h1>
    <table>
        <tr>
            <th style="border-top-left-radius: 10px">№</th>
            <th>Time</th>
            <th>Mondey</th>
            <th>Tuesday</th>
            <th>Wednesday</th>
            <th>Thursday</th>
            <th>Friday</th>
            <th style="border-top-right-radius: 10px">Saturday</th>
        </tr>
        <tr>
            <th rowspan="4" scope="rowgroup" >1</th>
            <th scope="row" >08:00-<br/>09:35</th>
            <td id="08:00:0011" ></td>
            <td id="08:00:0012" ></td>
            <td id="08:00:0013"></td>
            <td id="08:00:0014"></td>
            <td id="08:00:0015"></td>
            <td id="08:00:0016"></td>
        </tr>
        <tr>
            <th scope="row" >09:50-<br/>11:25</th>
            <td id="09:50:0011"></td>
            <td id="09:50:0012"></td>
            <td id="09:50:0013"></td>
            <td id="09:50:0014"></td>
            <td id="09:50:0015"></td>
            <td id="09:50:0016"></td>
        </tr>
        <tr>
            <th scope="row" >12:10-<br/>13:45</th>
            <td id="12:10:0011"></td>
            <td id="12:10:0012"></td>
            <td id="12:10:0013"></td>
            <td id="12:10:0014"></td>
            <td id="12:10:0015"></td>
            <td id="12:10:0016"></td>
        </tr>
        <tr>
            <th scope="row" >14:00-<br/>15:35</th>
            <td id="14:00:0011"></td>
            <td id="14:00:0012"></td>
            <td id="14:00:0013"></td>
            <td id="14:00:0014"></td>
            <td id="14:00:0015"></td>
            <td id="14:00:0016"></td>
        </tr>
        <tr>
            <th style="border-bottom-left-radius: 10px" rowspan="4" scope="rowgroup" >2</th>
            <th scope="row" >08:00-<br/>09:35</th>
            <td id="08:00:0021"></td>
            <td id="08:00:0022"></td>
            <td id="08:00:0023"></td>
            <td id="08:00:0024"></td>
            <td id="08:00:0025"></td>
            <td id="08:00:0026"></td>
        </tr>
        <tr>
            <th scope="row" >09:50-<br/>11:25</th>
            <td id="09:50:0021"></td>
            <td id="09:50:0022"></td>
            <td id="09:50:0023"></td>
            <td id="09:50:0024"></td>
            <td id="09:50:0025"></td>
            <td id="09:50:0026"></td>
        </tr>
        <tr>
            <th scope="row" >12:10-<br/>13:45</th>
            <td id="12:10:0021"></td>
            <td id="12:10:0022"></td>
            <td id="12:10:0023"></td>
            <td id="12:10:0024"></td>
            <td id="12:10:0025"></td>
            <td id="12:10:0026"></td>
        </tr>
        <tr>
            <th scope="row" >14:00-<br/>15:35</th>
            <td id="14:00:0021"></td>
            <td id="14:00:0022"></td>
            <td id="14:00:0023"></td>
            <td id="14:00:0024"></td>
            <td id="14:00:0025"></td>
            <td style="border-bottom-right-radius: 10px" id="14:00:0026"></td>
        </tr>
    </table>
</body>
<script>
    async function GetSchedule(){
        const response = await fetch("schedule/api", {
            method: "GET",
            headers: {"Accept" : "application/json"}
        })
        
        if (response.ok === true){
            const schedule = await response.json();
            schedule.days.forEach( day => SetDay(day));
        }
        else{
            const error = response.json();
            console.log(error.message)
        }
    }
    
    function SetDay(day){
        day.lessons.forEach(lesson => SetLesson(lesson, day.week, day.weekday));
    }
    
    function SetLesson(lesson, week, weekday){
        const cell = document.getElementById(lesson.time.start + week + weekday);
        const div = document.createElement("div");
        
        const a = document.createElement("a");
        cell.innerText = lesson.name + "[" + lesson.type + "]" + "\n";
        lesson.audience.forEach(aud => cell.innerText += aud.audience + "\n");
        
        lesson.teachers.forEach( _ => cell.innerText += _.teacher + "\n");
        
        switch (lesson.type){
            case "лаб.":
                cell.style.backgroundColor = "#526D73";
                break;
            case "пр.з.":
                cell.style.backgroundColor = "#735252";
                break;
            case "лк.":
                cell.style.backgroundColor = "#657352";
                break;
        }
        
        
    }
    GetSchedule();
</script>
</html>